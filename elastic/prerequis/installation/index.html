<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.118.2"><meta name=description content="Tutoriel sur Elastic"><meta name=author content="Maxime Calves"><link rel=icon href=/elastic-tutorial/images/favicon.png type=image/png><title>Installation :: Elastic Tutoriel</title><link href=/elastic-tutorial/css/nucleus.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/fontawesome-all.min.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/hybrid.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/featherlight.min.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/perfect-scrollbar.min.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/auto-complete.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/atom-one-dark-reasonable.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/theme.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/tabs.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/hugo-theme.css?1693837831 rel=stylesheet><link href=/elastic-tutorial/css/theme-blue.css?1693837831 rel=stylesheet><script src=/elastic-tutorial/js/jquery-3.3.1.min.js?1693837831></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/elastic-tutorial/elastic/prerequis/installation/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><img src=../../../../elastic-tutorial/media/logo.png></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/elastic-tutorial/js/lunr.min.js?1693837831></script>
<script type=text/javascript src=/elastic-tutorial/js/auto-complete.js?1693837831></script>
<script type=text/javascript>var baseurl="https://maxime-cls.github.io/elastic-tutorial/"</script><script type=text/javascript src=/elastic-tutorial/js/search.js?1693837831></script></div><div class=highlightable><ul class=topics><li data-nav-id=/elastic-tutorial/elastic/ title=Elastic class="dd-item
parent"><a href=/elastic-tutorial/elastic/>Elastic
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/elastic-tutorial/elastic/prerequis/ title=Prérequis class="dd-item
parent"><a href=/elastic-tutorial/elastic/prerequis/>Prérequis
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/elastic-tutorial/elastic/prerequis/installation/ title=Installation class="dd-item active"><a href=/elastic-tutorial/elastic/prerequis/installation/>Installation
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/elastic-tutorial/elastic/d%C3%A9butant/ title=Débutant class=dd-item><a href=/elastic-tutorial/elastic/d%C3%A9butant/>Débutant
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/elastic-tutorial/elastic/d%C3%A9butant/lab_logs/ title="Lab - Logs" class=dd-item><a href=/elastic-tutorial/elastic/d%C3%A9butant/lab_logs/>Lab - Logs
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/d%C3%A9butant/lab_metrics/ title="Lab - Metrics" class=dd-item><a href=/elastic-tutorial/elastic/d%C3%A9butant/lab_metrics/>Lab - Metrics
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/d%C3%A9butant/lab_apm/ title="Lab - APM" class=dd-item><a href=/elastic-tutorial/elastic/d%C3%A9butant/lab_apm/>Lab - APM
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/d%C3%A9butant/lab_uptime/ title="Lab - Uptime" class=dd-item><a href=/elastic-tutorial/elastic/d%C3%A9butant/lab_uptime/>Lab - Uptime
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/ title=Elementaire class=dd-item><a href=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/>Elementaire
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/security/ title="Lab - Habilitation" class=dd-item><a href=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/security/>Lab - Habilitation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/ilm/ title="Lab - Index Lifecycle Policy" class=dd-item><a href=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/ilm/>Lab - Index Lifecycle Policy
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/backup/ title="Lab - Backup & Restore" class=dd-item><a href=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/backup/>Lab - Backup & Restore
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/diagnostic/ title="Lab - Diagnostic" class=dd-item><a href=/elastic-tutorial/elastic/%C3%A9l%C3%A9mentaire/diagnostic/>Lab - Diagnostic
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/elastic-tutorial/elastic/intermediare/ title=Intermediare class=dd-item><a href=/elastic-tutorial/elastic/intermediare/>Intermediare
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/elastic-tutorial/elastic/intermediare/alerting/ title="Lab - Alertes" class=dd-item><a href=/elastic-tutorial/elastic/intermediare/alerting/>Lab - Alertes
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/intermediare/index_alias/ title="Labs - Index et ALias" class=dd-item><a href=/elastic-tutorial/elastic/intermediare/index_alias/>Labs - Index et ALias
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/intermediare/mapping/ title="Labs - Mapping" class=dd-item><a href=/elastic-tutorial/elastic/intermediare/mapping/>Labs - Mapping
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/intermediare/template_mapping/ title="Labs - Index Template et Mapping" class=dd-item><a href=/elastic-tutorial/elastic/intermediare/template_mapping/>Labs - Index Template et Mapping
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/intermediare/reindex/ title="Labs - Reindex" class=dd-item><a href=/elastic-tutorial/elastic/intermediare/reindex/>Labs - Reindex
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/intermediare/crud_documents/ title="Labs - CRUD" class=dd-item><a href=/elastic-tutorial/elastic/intermediare/crud_documents/>Labs - CRUD
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/elastic-tutorial/elastic/avance/ title=Avancé class=dd-item><a href=/elastic-tutorial/elastic/avance/>Avancé
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/elastic-tutorial/elastic/avance/term/ title="Labs - Query niveau I" class=dd-item><a href=/elastic-tutorial/elastic/avance/term/>Labs - Query niveau I
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/avance/sort/ title="Labs - Query niveau II" class=dd-item><a href=/elastic-tutorial/elastic/avance/sort/>Labs - Query niveau II
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/avance/query/ title="Labs - Query niveau III" class=dd-item><a href=/elastic-tutorial/elastic/avance/query/>Labs - Query niveau III
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/avance/tp_query/ title="TP : Définir et exécuter des requêtes de recherche dans Elasticsearch" class=dd-item><a href=/elastic-tutorial/elastic/avance/tp_query/>TP : Définir et exécuter des requêtes de recherche dans Elasticsearch
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/elastic-tutorial/elastic/avance/fleet/ title="Bonus - Fleet & Elastic Agent" class=dd-item><a href=/elastic-tutorial/elastic/avance/fleet/>Bonus - Fleet & Elastic Agent
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li></ul><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/elastic-tutorial/>Elastic Tutoriel</a> > <a href=/elastic-tutorial/elastic/>Elastic</a> > <a href=/elastic-tutorial/elastic/prerequis/>Prérequis</a> > Installation</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#prérequis>Prérequis</a><ul><li><a href=#vérification-de-votre-environnement-de-travail>Vérification de votre environnement de travail</a></li><li><a href=#déployer-la-stack-elasticsearch-kibana-dans-docker-avec-tls-activé>Déployer la stack Elasticsearch Kibana dans Docker avec TLS activé</a></li><li><a href=#déployer-une-application-blanche>Déployer une application blanche</a></li><li><a href=#déployer-les-agents-de-collectes>Déployer les agents de collectes</a></li><li><a href=#labs-avancés>Labs Avancés</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Installation</h1><h2 id=prérequis>Prérequis</h2><ul><li>Ubuntu ou Debian</li><li>Docker & Docker-Compose</li><li>Exécuter la commande ci-dessous</li></ul><pre tabindex=0><code>sudo sysctl -w vm.max_map_count=262144
</code></pre><h3 id=vérification-de-votre-environnement-de-travail>Vérification de votre environnement de travail</h3><h4 id=docker>Docker</h4><pre tabindex=0><code>docker version
</code></pre><p>Vous devez obtenir une réponse similaire :</p><pre tabindex=0><code>Client: Docker Engine - Community
 Version:           24.0.2
 API version:       1.43
 Go version:        go1.20.4
 Git commit:        cb74dfc
 Built:             Thu May 25 21:52:13 2023
 OS/Arch:           linux/amd64
 Context:           default

Server: Docker Engine - Community
 Engine:
  Version:          24.0.2
  API version:      1.43 (minimum version 1.12)
  Go version:       go1.20.4
  Git commit:       659604f
  Built:            Thu May 25 21:52:13 2023
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.6.21
  GitCommit:        3dce8eb055cbb6872793272b4f20ed16117344f8
 runc:
  Version:          1.1.7
  GitCommit:        v1.1.7-0-g860f061
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
</code></pre><p>Si vous avez un retour vous indiquant que la commande docker n&rsquo;est pas reconnu, veuillez l&rsquo;installer.</p><pre tabindex=0><code>curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
</code></pre><p>Si vous rencontrez des difficultés à utiliser la commande docker sans le sudo, veuillez ajouter cette configruation :</p><pre tabindex=0><code>sudo groupadd docker
sudo usermod -aG docker $USER
docker run hello-world
</code></pre><h3 id=déployer-la-stack-elasticsearch-kibana-dans-docker-avec-tls-activé>Déployer la stack Elasticsearch Kibana dans Docker avec TLS activé</h3><p>Si les fonctions de sécurité sont activées, vous devez configurer le chiffrement TLS (Transport Layer Security) pour la couche de transport d&rsquo;Elasticsearch. Bien qu&rsquo;il soit possible d&rsquo;utiliser une licence d&rsquo;essai sans configurer TLS, nous vous conseillons de sécuriser votre pile dès le départ.</p><p>Pour obtenir un cluster Elasticsearch et Kibana opérationnel dans Docker avec la sécurité activée, vous pouvez utiliser Docker Compose :</p><p><strong>instances.yml</strong> identifie les instances pour lesquelles vous devez créer des certificats.
<strong>elastic-docker-tls.yml</strong> est un fichier Docker Compose qui met en place un cluster Elasticsearch à trois nœuds et une instance Kibana avec TLS activé afin que vous puissiez voir comment les choses fonctionnent. Cette configuration tout-en-un est un moyen pratique de mettre en place votre premier cluster de développement avant de construire un déploiement distribué avec plusieurs hôtes.
<strong>beats-docker.yml</strong> est un fichier Docker Compose qui met en place les agents de collecte avec TLS activé afin que vous puissiez voir comment les choses fonctionnent.</p><p>Voici l&rsquo;arborscence :</p><pre tabindex=0><code>├── app
│   ├── artificial_load.sh
│   ├── conf
│   │   └── default.conf
│   └── petclinic.yml
└── elastic-stack
    ├── beats
    │   ├── beats-docker.yml
    │   └── conf
    │       ├── filebeat.yml
    │       ├── heartbeat.yml
    │       └── metricbeat.yml
    ├── data
    │   ├── accounts.json
    │   ├── logs.json
    │   └── shakespeare.json
    ├── elastic-docker-tls.yml
    └── instances.yml
</code></pre><p>Télécharger la projet contenant la plateforme Elastic :</p><pre tabindex=0><code>git clone https://github.com/Maxime-CLS/elastic-platform.git
</code></pre><p>Démarrer la stack Elastic</p><pre tabindex=0><code>cd elastic-platform/elastic-stack
docker compose -f elastic-docker-tls.yml up -d
</code></pre><p>Vérifiez a présence des volumes</p><pre tabindex=0><code>docker volume ls
</code></pre><pre tabindex=0><code>DRIVER    VOLUME NAME
local     es_certs
local     es_esdata01
local     es_esdata02
local     es_esdata03
local     es_kibanadata
</code></pre><p>Vérifiez la présence des certificats</p><pre tabindex=0><code>sudo ls -R /var/lib/docker/volumes/es_certs/_data/
</code></pre><pre tabindex=0><code>/var/lib/docker/volumes/es_certs/_data/:
ca  ca.zip  certs.zip  es01  es02  es03  fleet-server  instances.yml  kibana  package-registry

/var/lib/docker/volumes/es_certs/_data/ca:
ca.crt	ca.key

/var/lib/docker/volumes/es_certs/_data/es01:
es01.crt  es01.key

/var/lib/docker/volumes/es_certs/_data/es02:
es02.crt  es02.key

/var/lib/docker/volumes/es_certs/_data/es03:
es03.crt  es03.key

/var/lib/docker/volumes/es_certs/_data/fleet-server:
fleet-server.crt  fleet-server.key

/var/lib/docker/volumes/es_certs/_data/kibana:
kibana.crt  kibana.key

/var/lib/docker/volumes/es_certs/_data/package-registry:
package-registry.crt  package-registry.key
</code></pre><p>Ouvrez Kibana pour charger les données de l&rsquo;échantillon et interagir avec le cluster : <a href=https://localhost:5601>Kibana</a></p><p><img src=/elastic-tutorial/images/attachments/prerequis/kibana_connexion.png alt=image.png></p><p>Comme SSL est également activé pour les communications entre Kibana et les navigateurs clients, vous devez accéder à Kibana via le protocole HTTPS.</p><p>Ouvrez le menu de droit et cliquez sur &ldquo;Stack Monitorng&rdquo;</p><p><img src=/elastic-tutorial/images/attachments/prerequis/stack_monitoring.png alt=image.png></p><p>Cliquez sur l&rsquo;option &ldquo;Or, set up with self monitoring&rdquo;</p><p><img src=/elastic-tutorial/images/attachments/prerequis/enable_monitoring.png alt=image.png></p><p><img src=/elastic-tutorial/images/attachments/prerequis/turn_on_monitoring.png alt=image.png></p><p><img src=/elastic-tutorial/images/attachments/prerequis/monitoring.png alt=image.png></p><h3 id=déployer-une-application-blanche>Déployer une application blanche</h3><pre tabindex=0><code>cd ../app
docker compose -f petclinic.yml up -d
</code></pre><p>Accédez à la application blanche en cliquant <a href=http://localhost:8081>ici</a></p><p><img src=/elastic-tutorial/images/attachments/prerequis/petclinic.png alt=image.png></p><h3 id=déployer-les-agents-de-collectes>Déployer les agents de collectes</h3><pre tabindex=0><code>cd ../elastic-stack
docker compose -f beats/beats-docker.yml up -d
</code></pre><h3 id=labs-avancés>Labs Avancés</h3><h4 id=télécharger-des-données-dexemples>Télécharger des données d&rsquo;exemples</h4><pre tabindex=0><code>git clone https://github.com/Maxime-CLS/elastic-data-tutorial.git
</code></pre><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/elastic-tutorial/elastic/prerequis/ title=Prérequis><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/elastic-tutorial/elastic/d%C3%A9butant/ title=Débutant style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/elastic-tutorial/js/clipboard.min.js?1693837831></script>
<script src=/elastic-tutorial/js/perfect-scrollbar.min.js?1693837831></script>
<script src=/elastic-tutorial/js/perfect-scrollbar.jquery.min.js?1693837831></script>
<script src=/elastic-tutorial/js/jquery.sticky.js?1693837831></script>
<script src=/elastic-tutorial/js/featherlight.min.js?1693837831></script>
<script src=/elastic-tutorial/js/highlight.pack.js?1693837831></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/elastic-tutorial/js/modernizr.custom-3.6.0.js?1693837831></script>
<script src=/elastic-tutorial/js/learn.js?1693837831></script>
<script src=/elastic-tutorial/js/hugo-learn.js?1693837831></script>
<script src=/elastic-tutorial/mermaid/mermaid.js?1693837831></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>